{"version":3,"file":"index.umd.min.js","sources":["../src/lib/shared.js","../src/lib/events.js","../src/lib/api.js","../src/lib/defaults.js","../src/lib/markup.js","../src/lib/styles.js","../src/lib/setup.js","../src/lib/index.js"],"sourcesContent":["const _shared = {\n  pullStartY: null,\n  pullMoveY: null,\n  handlers: [],\n  styleEl: null,\n  events: null,\n  dist: 0,\n  state: 'pending',\n  timeout: null,\n  distResisted: 0,\n  supportsPassive: false,\n  supportsPointerEvents: typeof window !== 'undefined' && !!window.PointerEvent,\n};\n\ntry {\n  window.addEventListener('test', null, {\n    get passive() { // eslint-disable-line getter-return\n      _shared.supportsPassive = true;\n    },\n  });\n} catch (e) {\n  // do nothing\n}\n\nexport default _shared;\n","import _ptr from './api';\nimport _shared from './shared';\n\nlet _timeout;\n\nconst screenY = function screenY(event) {\n  if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n    return event.screenY;\n  }\n  return event.touches[0].screenY;\n};\n\nexport default () => {\n  let _el;\n\n  function _onTouchStart(e) {\n    // here, we must pick a handler first, and then append their html/css on the DOM\n    const target = _shared.handlers.filter(h => h.contains(e.target))[0];\n\n    _shared.enable = !!target;\n\n    if (target && _shared.state === 'pending') {\n      _el = _ptr.setupDOM(target);\n\n      if (target.shouldPullToRefresh()) {\n        _shared.pullStartY = screenY(e);\n      }\n\n      clearTimeout(_shared.timeout);\n\n      _ptr.update(target);\n    }\n  }\n\n  function _onTouchMove(e) {\n    if (!(_el && _el.ptrElement && _shared.enable)) {\n      return;\n    }\n\n    if (!_shared.pullStartY) {\n      if (_el.shouldPullToRefresh()) {\n        _shared.pullStartY = screenY(e);\n      }\n    } else {\n      _shared.pullMoveY = screenY(e);\n    }\n\n    if (_shared.state === 'refreshing') {\n      if (e.cancelable && _el.shouldPullToRefresh() && _shared.pullStartY < _shared.pullMoveY) {\n        e.preventDefault();\n      }\n\n      return;\n    }\n\n    if (_shared.state === 'pending') {\n      _el.ptrElement.classList.add(`${_el.classPrefix}pull`);\n      _shared.state = 'pulling';\n      _ptr.update(_el);\n    }\n\n    if (_shared.pullStartY && _shared.pullMoveY) {\n      _shared.dist = _shared.pullMoveY - _shared.pullStartY;\n    }\n\n    _shared.distExtra = _shared.dist - _el.distIgnore;\n\n    if (_shared.distExtra > 0) {\n      if (e.cancelable) {\n        e.preventDefault();\n      }\n\n      _el.ptrElement.style[_el.cssProp] = `${_shared.distResisted}px`;\n\n      _shared.distResisted = _el.resistanceFunction(_shared.distExtra / _el.distThreshold)\n        * Math.min(_el.distMax, _shared.distExtra);\n\n      if (_shared.state === 'pulling' && _shared.distResisted > _el.distThreshold) {\n        _el.ptrElement.classList.add(`${_el.classPrefix}release`);\n        _shared.state = 'releasing';\n        _ptr.update(_el);\n      }\n\n      if (_shared.state === 'releasing' && _shared.distResisted < _el.distThreshold) {\n        _el.ptrElement.classList.remove(`${_el.classPrefix}release`);\n        _shared.state = 'pulling';\n        _ptr.update(_el);\n      }\n    }\n  }\n\n  function _onTouchEnd() {\n    if (!(_el && _el.ptrElement && _shared.enable)) {\n      return;\n    }\n\n    // wait 1/2 sec before unmounting...\n    clearTimeout(_timeout);\n    _timeout = setTimeout(() => {\n      if (_el && _el.ptrElement && _shared.state === 'pending') {\n        _ptr.onReset(_el);\n      }\n    }, 500);\n\n    if (_shared.state === 'releasing' && _shared.distResisted > _el.distThreshold) {\n      _shared.state = 'refreshing';\n\n      _el.ptrElement.style[_el.cssProp] = `${_el.distReload}px`;\n      _el.ptrElement.classList.add(`${_el.classPrefix}refresh`);\n\n      _shared.timeout = setTimeout(() => {\n        const retval = _el.onRefresh(() => _ptr.onReset(_el));\n\n        if (retval && typeof retval.then === 'function') {\n          retval.then(() => _ptr.onReset(_el));\n        }\n\n        if (!retval && !_el.onRefresh.length) {\n          _ptr.onReset(_el);\n        }\n      }, _el.refreshTimeout);\n    } else {\n      if (_shared.state === 'refreshing') {\n        return;\n      }\n\n      _el.ptrElement.style[_el.cssProp] = '0px';\n\n      _shared.state = 'pending';\n    }\n\n    _ptr.update(_el);\n\n    _el.ptrElement.classList.remove(`${_el.classPrefix}release`);\n    _el.ptrElement.classList.remove(`${_el.classPrefix}pull`);\n\n    _shared.pullStartY = _shared.pullMoveY = null;\n    _shared.dist = _shared.distResisted = 0;\n  }\n\n  function _onScroll() {\n    if (_el) {\n      _el.mainElement.classList.toggle(`${_el.classPrefix}top`, _el.shouldPullToRefresh());\n    }\n  }\n\n  const _passiveSettings = _shared.supportsPassive\n    ? { passive: _shared.passive || false }\n    : undefined;\n\n  if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n    window.addEventListener('pointerup', _onTouchEnd);\n    window.addEventListener('pointerdown', _onTouchStart);\n    window.addEventListener('pointermove', _onTouchMove, _passiveSettings);\n  } else {\n    window.addEventListener('touchend', _onTouchEnd);\n    window.addEventListener('touchstart', _onTouchStart);\n    window.addEventListener('touchmove', _onTouchMove, _passiveSettings);\n  }\n\n  window.addEventListener('scroll', _onScroll);\n\n  return {\n    onTouchEnd: _onTouchEnd,\n    onTouchStart: _onTouchStart,\n    onTouchMove: _onTouchMove,\n    onScroll: _onScroll,\n\n    destroy() {\n      if (_shared.pointerEventsEnabled && _shared.supportsPointerEvents) {\n        window.removeEventListener('pointerdown', _onTouchStart);\n        window.removeEventListener('pointerup', _onTouchEnd);\n        window.removeEventListener('pointermove', _onTouchMove, _passiveSettings);\n      } else {\n        window.removeEventListener('touchstart', _onTouchStart);\n        window.removeEventListener('touchend', _onTouchEnd);\n        window.removeEventListener('touchmove', _onTouchMove, _passiveSettings);\n      }\n\n      window.removeEventListener('scroll', _onScroll);\n    },\n  };\n};\n","import _shared from \"./shared\";\n\nfunction setupDOM(handler) {\n    if (!handler.ptrElement) {\n        const ptr = document.createElement(\"div\");\n\n        if (handler.mainElement !== document.body) {\n            handler.mainElement.parentNode.insertBefore(ptr, handler.mainElement);\n        } else {\n            document.body.insertBefore(ptr, document.body.firstChild);\n        }\n\n        ptr.classList.add(`${handler.classPrefix}ptr`);\n        ptr.innerHTML = handler.getMarkup().replace(/__PREFIX__/g, handler.classPrefix);\n\n        handler.ptrElement = ptr;\n\n        if (typeof handler.onInit === \"function\") {\n            handler.onInit(handler);\n        }\n\n        // Add the css styles to the style node, and then\n        // insert it into the dom\n        if (!_shared.styleEl) {\n            _shared.styleEl = document.createElement(\"style\");\n            _shared.styleEl.setAttribute(\"id\", \"pull-to-refresh-js-style\");\n\n            document.head.appendChild(_shared.styleEl);\n        }\n\n        _shared.styleEl.textContent = handler\n            .getStyles()\n            .replace(/__PREFIX__/g, handler.classPrefix)\n            .replace(/\\s+/g, \" \");\n    }\n\n    return handler;\n}\n\nfunction onReset(handler) {\n    if (!handler.ptrElement) return;\n\n    handler.ptrElement.classList.remove(`${handler.classPrefix}refresh`);\n    handler.ptrElement.style[handler.cssProp] = \"0px\";\n\n    setTimeout(() => {\n        // remove previous ptr-element from DOM\n        if (handler.ptrElement && handler.ptrElement.parentNode) {\n            handler.ptrElement.parentNode.removeChild(handler.ptrElement);\n            handler.ptrElement = null;\n        }\n\n        // reset state\n        _shared.state = \"pending\";\n    }, handler.refreshTimeout);\n}\n\nfunction update(handler) {\n    const iconEl = handler.ptrElement.querySelector(`.${handler.classPrefix}icon`);\n\n    const loadingElement =\n        \"<path d='M10 3.70968C9.45164 3.70968 9.03229 3.29032 9.03229 2.74194V0.967742C9.03229 0.419355 9.45164 0 10 0C10.5484 0 10.9678 0.419355 10.9678 0.967742V2.74194C10.9678 3.25806 10.5484 3.70968 10 3.70968Z' fill='#FF8049' fill-opacity='0.22'/><path d='M10 20C9.45164 20 9.03229 19.5806 9.03229 19.0322V17.258C9.03229 16.7096 9.45164 16.2903 10 16.2903C10.5484 16.2903 10.9678 16.7096 10.9678 17.258V19.0322C10.9678 19.5806 10.5484 20 10 20Z' fill='#FF8049' fill-opacity='0.8'/><path d='M6.35481 4.67743C6.03223 4.67743 5.70965 4.51614 5.5161 4.19356L4.64513 2.67743C4.38707 2.22582 4.54836 1.61291 4.99997 1.35485C5.45159 1.09679 6.06449 1.25808 6.32255 1.70969L7.19352 3.22582C7.45159 3.67743 7.2903 4.29033 6.83868 4.5484C6.70965 4.61292 6.5161 4.67743 6.35481 4.67743Z' fill='#FF8049' fill-opacity='0.14'/><path d='M14.5161 18.7741C14.1935 18.7741 13.871 18.6128 13.6774 18.2902L12.8064 16.7741C12.5484 16.3225 12.7097 15.7096 13.1613 15.4515C13.6129 15.1935 14.2258 15.3548 14.4839 15.8064L15.3548 17.3225C15.6129 17.7741 15.4516 18.387 15 18.6451C14.8387 18.7419 14.6774 18.7741 14.5161 18.7741Z' fill='#FF8049' fill-opacity='0.7'/><path d='M3.70969 7.32256C3.5484 7.32256 3.38711 7.2903 3.22582 7.19352L1.70969 6.32256C1.25808 6.06449 1.09679 5.45159 1.35485 4.99997C1.61291 4.54836 2.22582 4.38707 2.67743 4.64513L4.19356 5.5161C4.64517 5.77417 4.80646 6.38707 4.5484 6.83868C4.35485 7.16127 4.03227 7.32256 3.70969 7.32256Z' fill='#FF8049' fill-opacity='0.08'/><path d='M17.8387 15.4839C17.6775 15.4839 17.5162 15.4517 17.3549 15.3549L15.8065 14.4839C15.3549 14.2259 15.1936 13.613 15.4517 13.1613C15.7097 12.7097 16.3226 12.5484 16.7742 12.8065L18.2904 13.6775C18.742 13.9355 18.9033 14.5484 18.6452 15.0001C18.4839 15.3226 18.1613 15.4839 17.8387 15.4839Z' fill='#FF8049' fill-opacity='0.6'/><path d='M2.74194 10.9677H0.967742C0.419355 10.9677 0 10.5484 0 9.99997C0 9.45158 0.419355 9.03223 0.967742 9.03223H2.74194C3.29032 9.03223 3.70968 9.45158 3.70968 9.99997C3.70968 10.5484 3.25806 10.9677 2.74194 10.9677Z' fill='#FF8049' fill-opacity='0.05'/><path d='M19.0322 10.9677H17.258C16.7096 10.9677 16.2903 10.5484 16.2903 9.99997C16.2903 9.45158 16.7096 9.03223 17.258 9.03223H19.0322C19.5806 9.03223 20 9.45158 20 9.99997C20 10.5484 19.5806 10.9677 19.0322 10.9677Z' fill='#FF8049' fill-opacity='0.5'/><path d='M2.16133 15.4839C1.83875 15.4839 1.51617 15.3226 1.32262 15.0001C1.06456 14.5484 1.22585 13.9355 1.67746 13.6775L3.19359 12.8065C3.6452 12.5484 4.25811 12.7097 4.51617 13.1613C4.77424 13.613 4.61295 14.2259 4.16133 14.4839L2.6452 15.3549C2.51617 15.4517 2.35488 15.4839 2.16133 15.4839Z' fill='#FF8049'/><path d='M16.2904 7.32256C15.9678 7.32256 15.6452 7.16127 15.4517 6.83868C15.1936 6.38707 15.3549 5.77417 15.8065 5.5161L17.3226 4.64513C17.7742 4.38707 18.3871 4.54836 18.6452 4.99997C18.9033 5.45159 18.742 6.06449 18.2904 6.32256L16.7742 7.19352C16.6129 7.2903 16.4516 7.32256 16.2904 7.32256Z' fill='#FF8049' fill-opacity='0.4'/><path d='M5.48384 18.7741C5.32255 18.7741 5.16126 18.7419 4.99997 18.6451C4.54836 18.387 4.38707 17.7741 4.64513 17.3225L5.5161 15.8064C5.77417 15.3548 6.38707 15.1935 6.83868 15.4515C7.2903 15.7096 7.45159 16.3225 7.19352 16.7741L6.32255 18.2902C6.129 18.6128 5.80642 18.7741 5.48384 18.7741Z' fill='#FF8049' fill-opacity='0.9'/><path d='M13.6452 4.67743C13.4839 4.67743 13.3226 4.64517 13.1613 4.5484C12.7097 4.29033 12.5484 3.67743 12.8064 3.22582L13.6774 1.70969C13.9355 1.25808 14.5484 1.09679 15 1.35485C15.4516 1.61291 15.6129 2.22582 15.3548 2.67743L14.4839 4.19356C14.2903 4.48388 13.9677 4.67743 13.6452 4.67743Z' fill='#FF8049' fill-opacity='0.3'/>\";\n\n    if (iconEl) {\n        if (_shared.state === \"refreshing\") {\n            iconEl.innerHTML =\n                \"<div style='margin: 0 auto; text-align: center'><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20' fill='none' style='margin: auto'>\" +\n                loadingElement +\n                \"</svg></div>\";\n        }\n    }\n}\n\nexport default {\n    setupDOM,\n    onReset,\n    update,\n};\n","import _ptrMarkup from './markup';\nimport _ptrStyles from './styles';\n\nexport default {\n  distThreshold: 60,\n  distMax: 80,\n  distReload: 50,\n  distIgnore: 0,\n  mainElement: 'body',\n  triggerElement: 'body',\n  ptrElement: '.ptr',\n  classPrefix: 'ptr--',\n  cssProp: 'min-height',\n  iconArrow: '&#8675;',\n  iconRefreshing: '&hellip;',\n  instructionsPullToRefresh: 'Pull down to refresh',\n  instructionsReleaseToRefresh: 'Release to refresh',\n  instructionsRefreshing: 'Refreshing',\n  refreshTimeout: 500,\n  getMarkup: () => _ptrMarkup,\n  getStyles: () => _ptrStyles,\n  onInit: () => {},\n  onRefresh: () => location.reload(),\n  resistanceFunction: t => Math.min(1, t / 2.5),\n  shouldPullToRefresh: () => !window.scrollY,\n};\n","export default `\n<div class=\"__PREFIX__box\">\n  <div class=\"__PREFIX__content\">\n    <div class=\"__PREFIX__icon\"></div>\n    <div class=\"__PREFIX__text\"></div>\n  </div>\n</div>\n`;\n","export default `\n.__PREFIX__ptr {\n  pointer-events: none;\n  font-size: 0.85em;\n  font-weight: bold;\n  top: 0;\n  height: 0;\n  transition: height 0.3s, min-height 0.3s;\n  text-align: center;\n  width: 100%;\n  overflow: hidden;\n  display: flex;\n  align-items: flex-end;\n  align-content: stretch;\n}\n\n.__PREFIX__box {\n  flex-basis: 100%;\n}\n\n.__PREFIX__pull {\n  transition: none;\n}\n\n/*\nWhen at the top of the page, disable vertical overscroll so passive touch\nlisteners can take over.\n*/\n.__PREFIX__top {\n  touch-action: pan-x pan-down pinch-zoom;\n}\n`;\n","import _setupEvents from './events';\nimport _defaults from './defaults';\nimport _shared from './shared';\n\nconst _methods = ['mainElement', 'ptrElement', 'triggerElement'];\n\nexport default options => {\n  const _handler = {};\n\n  // merge options with defaults\n  Object.keys(_defaults).forEach(key => {\n    _handler[key] = options[key] || _defaults[key];\n  });\n\n  // normalize timeout value, even if it is zero\n  _handler.refreshTimeout = typeof options.refreshTimeout === 'number'\n    ? options.refreshTimeout\n    : _defaults.refreshTimeout;\n\n  // normalize elements\n  _methods.forEach(method => {\n    if (typeof _handler[method] === 'string') {\n      _handler[method] = document.querySelector(_handler[method]);\n    }\n  });\n\n  // attach events lazily\n  if (!_shared.events) {\n    _shared.events = _setupEvents();\n  }\n\n  _handler.contains = target => {\n    return _handler.triggerElement.contains(target);\n  };\n\n  _handler.destroy = () => {\n    // stop pending any pending callbacks\n    clearTimeout(_shared.timeout);\n\n    // remove handler from shared state\n    const offset = _shared.handlers.indexOf(_handler);\n    _shared.handlers.splice(offset, 1);\n  };\n\n  return _handler;\n};\n","import _ptr from \"./api\";\nimport _shared from \"./shared\";\nimport _setupEvents from \"./events\";\nimport _setupHandler from \"./setup\";\n\n// public API\nexport default {\n    setPassiveMode(isPassive) {\n        _shared.passive = isPassive;\n    },\n    setPointerEventsMode(isEnabled) {\n        _shared.pointerEventsEnabled = isEnabled;\n    },\n    destroyAll() {\n        if (_shared.events) {\n            _shared.events.destroy();\n            _shared.events = null;\n        }\n\n        _shared.handlers.forEach((h) => {\n            h.destroy();\n        });\n    },\n    init(options = {}) {\n        const handler = _setupHandler(options);\n\n        _shared.handlers.push(handler);\n\n        return handler;\n    },\n\n    // export utils for testing\n    _: {\n        setupHandler: _setupHandler,\n        setupEvents: _setupEvents,\n        setupDOM: _ptr.setupDOM,\n        onReset: _ptr.onReset,\n        update: _ptr.update,\n    },\n};\n"],"names":["const","_shared","pullStartY","pullMoveY","handlers","styleEl","events","dist","state","timeout","distResisted","supportsPassive","supportsPointerEvents","window","PointerEvent","addEventListener","e","_timeout","handler","ptrElement","ptr","document","createElement","mainElement","body","parentNode","insertBefore","firstChild","classList","add","innerHTML","getMarkup","replace","classPrefix","onInit","setAttribute","head","appendChild","textContent","getStyles","remove","style","cssProp","setTimeout","removeChild","refreshTimeout","iconEl","querySelector","screenY","event","pointerEventsEnabled","touches","_el","_onTouchStart","target","filter","h","contains","enable","_ptr","setupDOM","shouldPullToRefresh","clearTimeout","update","_onTouchMove","distExtra","distIgnore","cancelable","preventDefault","resistanceFunction","distThreshold","Math","min","distMax","_onTouchEnd","onReset","retval","onRefresh","then","length","_onScroll","toggle","_passiveSettings","passive","undefined","onTouchEnd","onTouchStart","onTouchMove","onScroll","destroy","removeEventListener","distReload","triggerElement","iconArrow","iconRefreshing","instructionsPullToRefresh","instructionsReleaseToRefresh","instructionsRefreshing","location","reload","t","scrollY","_methods","options","_handler","Object","keys","_defaults","forEach","key","method","_setupEvents","offset","indexOf","splice","setPassiveMode","isPassive","setPointerEventsMode","isEnabled","destroyAll","init","_setupHandler","push","_","setupHandler","setupEvents"],"mappings":"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"}